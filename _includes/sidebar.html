{% comment %}Sort categories by latest post dates.{% endcomment %}

{% assign categories = [] %}
{% for post in site.posts %}
    {% unless categories contains post.category %}
        {% capture categories_str %}{{ categories | join:'|' }}|{{ post.category }}{% endcapture %}
        {% assign categories = (categories_str | split:'|') %}
    {% endunless %}
{% endfor %}


{% for category in categories %}
    <ul class="nav nav-sidebar">
        {% for post in site.posts %}{% if post.category == category %}
            {% if page.title == post.title %}
                <li class="active"><a href="#">{{ post.title }}</a></li>
            {% else %}
                <li><a href="{{ post.url }}">{{ post.title }}</a></li>
            {% endif %}
        {% endif %}{% endfor %}
    </ul>
{% endfor %}
